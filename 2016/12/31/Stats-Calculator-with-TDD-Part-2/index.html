<!DOCTYPE html>
<html lang=en>
<head>
    <meta charset="utf-8">
    
    <title>Stats Calculator with TDD Part 2 | Agile</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="description" content="We implemented finding minimum value from a sequence of integers. Finding maximum and average is very straightforward and similar to what we have done in my previous post. So I will just put the code">
<meta property="og:type" content="article">
<meta property="og:title" content="Stats Calculator with TDD Part 2">
<meta property="og:url" content="http://seanyinx.github.io/2016/12/31/Stats-Calculator-with-TDD-Part-2/index.html">
<meta property="og:site_name" content="Agile">
<meta property="og:description" content="We implemented finding minimum value from a sequence of integers. Finding maximum and average is very straightforward and similar to what we have done in my previous post. So I will just put the code">
<meta property="og:image" content="http://seanyinx.github.io/2016/12/31/Stats-Calculator-with-TDD-Part-2/tdd.stats.calculator.7.gif">
<meta property="og:image" content="http://seanyinx.github.io/2016/12/31/Stats-Calculator-with-TDD-Part-2/tdd.stats.calculator.8.gif">
<meta property="og:image" content="http://seanyinx.github.io/2016/12/31/Stats-Calculator-with-TDD-Part-2/tdd.stats.calculator.9.gif">
<meta property="og:image" content="http://seanyinx.github.io/2016/12/31/Stats-Calculator-with-TDD-Part-2/tdd.stats.calculator.10.gif">
<meta property="og:image" content="http://seanyinx.github.io/2016/12/31/Stats-Calculator-with-TDD-Part-2/tdd.stats.calculator.11.gif">
<meta property="og:image" content="http://seanyinx.github.io/2016/12/31/Stats-Calculator-with-TDD-Part-2/tdd.stats.calculator.12.gif">
<meta property="og:updated_time" content="2016-12-31T09:33:01.514Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Stats Calculator with TDD Part 2">
<meta name="twitter:description" content="We implemented finding minimum value from a sequence of integers. Finding maximum and average is very straightforward and similar to what we have done in my previous post. So I will just put the code">
<meta name="twitter:image" content="http://seanyinx.github.io/2016/12/31/Stats-Calculator-with-TDD-Part-2/tdd.stats.calculator.7.gif">
    

    
        <link rel="alternate" href="/" title="Agile" type="application/atom+xml" />
    

    

    <link rel="stylesheet" href="/libs/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="/libs/open-sans/styles.css">
    <link rel="stylesheet" href="/libs/source-code-pro/styles.css">

    <link rel="stylesheet" href="/css/style.css">

    <script src="/libs/jquery/2.1.3/jquery.min.js"></script>
    
    
        <link rel="stylesheet" href="/libs/lightgallery/css/lightgallery.min.css">
    
    
        <link rel="stylesheet" href="/libs/justified-gallery/justifiedGallery.min.css">
    
    
    
    


</head>

<body>
    <div id="container">
        <header id="header">
    <div id="header-main" class="header-inner">
        <div class="outer">
            <a href="/" id="logo">
                <i class="logo"></i>
                <span class="site-title">Agile</span>
            </a>
            <nav id="main-nav">
                
                    <a class="main-nav-link" href="/.">Home</a>
                
                    <a class="main-nav-link" href="/archives">Archives</a>
                
            </nav>
            
                
                <nav id="sub-nav">
                    <div class="profile" id="profile-nav">
                        <a id="profile-anchor" href="javascript:;">
                            <img class="avatar" src="https://www.gravatar.com/avatar/9efeab480386832ca6951317ee77a0d1" />
                            <i class="fa fa-caret-down"></i>
                        </a>
                    </div>
                </nav>
            
            <div id="search-form-wrap">

    <form class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="Search" />
        <button type="submit" class="search-form-submit"></button>
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="Type something..." />
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: 'Posts',
            PAGES: 'Pages',
            CATEGORIES: 'Categories',
            TAGS: 'Tags',
            UNTITLED: '(Untitled)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>
<script src="/js/insight.js"></script>

</div>
        </div>
    </div>
    <div id="main-nav-mobile" class="header-sub header-inner">
        <table class="menu outer">
            <tr>
                
                    <td><a class="main-nav-link" href="/.">Home</a></td>
                
                    <td><a class="main-nav-link" href="/archives">Archives</a></td>
                
                <td>
                    
    <div class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="Search" />
    </div>

                </td>
            </tr>
        </table>
    </div>
</header>

        <div class="outer">
            
                

<aside id="profile">
    <div class="inner profile-inner">
        <div class="base-info profile-block">
            <img id="avatar" src="https://www.gravatar.com/avatar/9efeab480386832ca6951317ee77a0d1?s=128" />
            <h2 id="name">seanyinx</h2>
            <h3 id="title">Architect &amp; Agile Consultant</h3>
            <span id="location"><i class="fa fa-map-marker"></i>Beijing, China</span>
            <a id="follow" target="_blank" href="https://github.com/seanyinx/">FOLLOW</a>
        </div>
        <div class="article-info profile-block">
            <div class="article-info-block">
                4
                <span>posts</span>
            </div>
            <div class="article-info-block">
                3
                <span>tags</span>
            </div>
        </div>
        
        <div class="profile-block social-links">
            <table>
                <tr>
                    
                    
                    <td>
                        <a href="http://github.com/seanyinx" target="_blank" title="github" class=tooltip>
                            <i class="fa fa-github"></i>
                        </a>
                    </td>
                    
                    <td>
                        <a href="/" target="_blank" title="twitter" class=tooltip>
                            <i class="fa fa-twitter"></i>
                        </a>
                    </td>
                    
                    <td>
                        <a href="/" target="_blank" title="facebook" class=tooltip>
                            <i class="fa fa-facebook"></i>
                        </a>
                    </td>
                    
                    <td>
                        <a href="/" target="_blank" title="dribbble" class=tooltip>
                            <i class="fa fa-dribbble"></i>
                        </a>
                    </td>
                    
                    <td>
                        <a href="/" target="_blank" title="rss" class=tooltip>
                            <i class="fa fa-rss"></i>
                        </a>
                    </td>
                    
                </tr>
            </table>
        </div>
        
    </div>
</aside>

            
            <section id="main"><article id="post-Stats-Calculator-with-TDD-Part-2" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 class="article-title" itemprop="name">
            Stats Calculator with TDD Part 2
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/2016/12/31/Stats-Calculator-with-TDD-Part-2/">
            <time datetime="2016-12-31T08:27:13.000Z" itemprop="datePublished">2016-12-31</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/TDD/">TDD</a>
    </div>

                        
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/TDD/">TDD</a>, <a class="tag-link" href="/tags/Testing/">Testing</a>, <a class="tag-link" href="/tags/XP/">XP</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <p>We implemented finding minimum value from a sequence of integers. Finding maximum and average is very straightforward and similar to what we have done in my previous post. So I will just put the code here directly to keep us from being bored.</p>
<a id="more"></a>
<h2 id="Test-Cases"><a href="#Test-Cases" class="headerlink" title="Test Cases"></a>Test Cases</h2><p>If you try with the sample integer sequence in my previous post, you may find that the calculated average is different from the expected one. I believe itâ€™s a mistake in the original Kata.<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StatsCalculatorTest</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> StatsCalculator statsCalculator = <span class="keyword">new</span> StatsCalculator();</div><div class="line"></div><div class="line">    <span class="meta">@Test</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">minOfSomeElementsReturnsTheMinimum</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">int</span> min = statsCalculator.minOf(<span class="number">6</span>, <span class="number">9</span>, <span class="number">15</span>, -<span class="number">2</span>, <span class="number">92</span>, <span class="number">11</span>);</div><div class="line"></div><div class="line">        assertThat(min, is(-<span class="number">2</span>));</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Test</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">minOfBlowsUpWhenNoElementProvided</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">try</span> &#123;</div><div class="line">            statsCalculator.minOf();</div><div class="line">            Assert.fail(IllegalArgumentException.class.getName() + <span class="string">" expected"</span>);</div><div class="line">        &#125; <span class="keyword">catch</span> (IllegalArgumentException e) &#123;</div><div class="line">            assertThat(e.getMessage(), is(<span class="string">"No element provided"</span>));</div><div class="line">        &#125;</div><div class="line"></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Test</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">maxOfSomeElementsReturnsTheMinimum</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">int</span> max = statsCalculator.maxOf(<span class="number">6</span>, <span class="number">9</span>, <span class="number">15</span>, -<span class="number">2</span>, <span class="number">92</span>, <span class="number">11</span>);</div><div class="line"></div><div class="line">        assertThat(max, is(<span class="number">92</span>));</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Test</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">maxOfBlowsUpWhenNoElementProvided</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">try</span> &#123;</div><div class="line">            statsCalculator.maxOf();</div><div class="line">            Assert.fail(IllegalArgumentException.class.getName() + <span class="string">" expected"</span>);</div><div class="line">        &#125; <span class="keyword">catch</span> (IllegalArgumentException e) &#123;</div><div class="line">            assertThat(e.getMessage(), is(<span class="string">"No element provided"</span>));</div><div class="line">        &#125;</div><div class="line"></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Test</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">averageOfSomeElementsReturnsTheMinimum</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">double</span> average = statsCalculator.averageOf(<span class="number">6</span>, <span class="number">9</span>, <span class="number">15</span>, -<span class="number">2</span>, <span class="number">92</span>, <span class="number">11</span>);</div><div class="line"></div><div class="line">        assertThat(average, closeTo(<span class="number">21.833333</span>, <span class="number">0.00001</span>));</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Test</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">averageOfBlowsUpWhenNoElementProvided</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">try</span> &#123;</div><div class="line">            statsCalculator.averageOf();</div><div class="line">            Assert.fail(IllegalArgumentException.class.getName() + <span class="string">" expected"</span>);</div><div class="line">        &#125; <span class="keyword">catch</span> (IllegalArgumentException e) &#123;</div><div class="line">            assertThat(e.getMessage(), is(<span class="string">"No element provided"</span>));</div><div class="line">        &#125;</div><div class="line"></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="Product-Code"><a href="#Product-Code" class="headerlink" title="Product Code"></a>Product Code</h2><p>The production code for finding minimum, maximum, and average values looks like the follows.<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StatsCalculator</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">minOf</span><span class="params">(<span class="keyword">int</span>... elements)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (elements.length == <span class="number">0</span>) &#123;</div><div class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">"No element provided"</span>);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">int</span> min = Integer.MAX_VALUE;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> element : elements) &#123;</div><div class="line">            min = Math.min(element, min);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> min;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">maxOf</span><span class="params">(<span class="keyword">int</span>... elements)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (elements.length == <span class="number">0</span>) &#123;</div><div class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">"No element provided"</span>);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">int</span> max = Integer.MIN_VALUE;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> element : elements) &#123;</div><div class="line">            max = Math.max(element, max);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> max;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">averageOf</span><span class="params">(<span class="keyword">int</span>... elements)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (elements.length == <span class="number">0</span>) &#123;</div><div class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">"No element provided"</span>);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">int</span> sum = <span class="number">0</span>;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> element : elements) &#123;</div><div class="line">            sum = element + sum;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">return</span> ((<span class="keyword">double</span>) sum) / elements.length;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>Are we done? There are quite a few duplicate code in the implementation above, such as the exception handling and looping of elements.</p>
<h2 id="Refactoring"><a href="#Refactoring" class="headerlink" title="Refactoring"></a>Refactoring</h2><p>It seems the only differences among the three methods are the initial min/max/sum value and operation on each element. We can extract the duplicate code to a common method, if we can pass those two as parameters.</p>
<p>The only way to pass operations by parameter is to encapsulate the operations in objects and pass the objects as a parameter. In order for a single method to accept different types of operations, the objects containing the operations have to implement a common interface.</p>
<h3 id="1-Extracting-operations"><a href="#1-Extracting-operations" class="headerlink" title="1. Extracting operations"></a>1. Extracting operations</h3><p>We have first extract min/max/average operations into objects.</p>
<ul>
<li>Extracting min operation</li>
</ul>
<p><img src="/2016/12/31/Stats-Calculator-with-TDD-Part-2/tdd.stats.calculator.7.gif" alt="Extracting Min Operation"></p>
<ul>
<li>Extracting max operation</li>
</ul>
<p><img src="/2016/12/31/Stats-Calculator-with-TDD-Part-2/tdd.stats.calculator.8.gif" alt="Extracting Max Operation"></p>
<ul>
<li>Extracting average operation</li>
</ul>
<p><img src="/2016/12/31/Stats-Calculator-with-TDD-Part-2/tdd.stats.calculator.9.gif" alt="Extracting Average Operation"></p>
<h3 id="2-Extracting-common-interface"><a href="#2-Extracting-common-interface" class="headerlink" title="2.Extracting common interface"></a>2.Extracting common interface</h3><p><img src="/2016/12/31/Stats-Calculator-with-TDD-Part-2/tdd.stats.calculator.10.gif" alt="Extracting Common Interface"></p>
<h3 id="3-Extracting-duplicate-code-to-a-method"><a href="#3-Extracting-duplicate-code-to-a-method" class="headerlink" title="3. Extracting duplicate code to a method"></a>3. Extracting duplicate code to a method</h3><p>With operations extracted to objects implementing the same interface, we are ready to extract duplicate code to a common method and pass both initial value and operation of min/max/average to the method by parameter.</p>
<p><img src="/2016/12/31/Stats-Calculator-with-TDD-Part-2/tdd.stats.calculator.11.gif" alt="Extracting Duplicate Code to a Method"></p>
<h3 id="4-Code-tidy-up"><a href="#4-Code-tidy-up" class="headerlink" title="4. Code tidy up"></a>4. Code tidy up</h3><p><img src="/2016/12/31/Stats-Calculator-with-TDD-Part-2/tdd.stats.calculator.12.gif" alt="Code Tidy Up"></p>
<h2 id="The-Final-Code"><a href="#The-Final-Code" class="headerlink" title="The Final Code"></a>The Final Code</h2><p>We have finished refactoring our code and we shall run the test cases again (multiple times during the refactoring as well) to make sure everything is fine.</p>
<ul>
<li><p>Operation Interface</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Command</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">int</span> <span class="title">invoke</span><span class="params">(<span class="keyword">int</span> element, <span class="keyword">int</span> min)</span></span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>Stats Calculator</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StatsCalculator</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Command minCommand = <span class="keyword">new</span> MinCommand();</div><div class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Command maxCommand = <span class="keyword">new</span> MaxCommand();</div><div class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Command averageCommand = <span class="keyword">new</span> AverageCommand();</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">minOf</span><span class="params">(<span class="keyword">int</span>... elements)</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> aggregate(Integer.MAX_VALUE, minCommand, elements);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">maxOf</span><span class="params">(<span class="keyword">int</span>... elements)</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> aggregate(Integer.MIN_VALUE, maxCommand, elements);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">averageOf</span><span class="params">(<span class="keyword">int</span>... elements)</span> </span>&#123;</div><div class="line">        <span class="keyword">int</span> sum = aggregate(<span class="number">0</span>, averageCommand, elements);</div><div class="line"></div><div class="line">        <span class="keyword">return</span> ((<span class="keyword">double</span>) sum) / elements.length;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">aggregate</span><span class="params">(<span class="keyword">int</span> value, Command command, <span class="keyword">int</span>[] elements)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (elements.length == <span class="number">0</span>) &#123;</div><div class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">"No element provided"</span>);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">int</span> result = value;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> element : elements) &#123;</div><div class="line">            result = command.invoke(element, result);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> result;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">MinCommand</span> <span class="keyword">implements</span> <span class="title">Command</span> </span>&#123;</div><div class="line"></div><div class="line">        <span class="meta">@Override</span></div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">invoke</span><span class="params">(<span class="keyword">int</span> element, <span class="keyword">int</span> min)</span> </span>&#123;</div><div class="line">            <span class="keyword">return</span> Math.min(element, min);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">MaxCommand</span> <span class="keyword">implements</span> <span class="title">Command</span> </span>&#123;</div><div class="line"></div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">invoke</span><span class="params">(<span class="keyword">int</span> element, <span class="keyword">int</span> max)</span> </span>&#123;</div><div class="line">            <span class="keyword">return</span> Math.max(element, max);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">AverageCommand</span> <span class="keyword">implements</span> <span class="title">Command</span> </span>&#123;</div><div class="line"></div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">invoke</span><span class="params">(<span class="keyword">int</span> element, <span class="keyword">int</span> sum)</span> </span>&#123;</div><div class="line">            <span class="keyword">return</span> element + sum;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h2><p>We have eliminated duplicate code and made our production code much easier to read. Moreover, if thereâ€™s a new requirement asking to perform more calculations, such as sum of squared elements, we are able to achieve that easily by implementing another subclass of <code>Command</code> interface.</p>
<p>If you look at our test cases, they are concrete and quite easy to understand. I am pretty sure we achieved 100% test coverage too.</p>
<p>To me, another benefit of TDD is fun. I am achieving all the benefits mentioned in my previous post while having fun! It will be totally different but terrible experience to write test cases after completing production code. If you donâ€™t believe me, try it yourself.</p>

        
        </div>
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="http://seanyinx.github.io/2016/12/31/Stats-Calculator-with-TDD-Part-2/" data-id="cixd179ee0001a4z7w0ahq633" class="article-share-link"><i class="fa fa-share"></i>Share</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fa fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fa fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fa fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fa fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    
        <a href="http://seanyinx.github.io/2016/12/31/Stats-Calculator-with-TDD-Part-2/#comments" class="article-comment-link disqus-comment-count" data-disqus-url="http://seanyinx.github.io/2016/12/31/Stats-Calculator-with-TDD-Part-2/">Comments</a>
    

        </footer>
    </div>
    
        
<nav id="article-nav">
    
    
        <a href="/2016/12/19/Stats-Calculator-with-TDD-Part-1/" id="article-nav-older" class="article-nav-link-wrap">
            <strong class="article-nav-caption">Older</strong>
            <div class="article-nav-title">Stats Calculator with TDD Part 1</div>
        </a>
    
</nav>


    
</article>


    
    <section id="comments">
    
        
    <div id="disqus_thread">
        <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    </div>

    
    </section>

</section>
            
                <aside id="sidebar">
   
        
    <div class="widget-wrap">
        <h3 class="widget-title">recent</h3>
        <div class="widget">
            <ul id="recent-post" class="no-thumbnail">
                
                    <li>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/TDD/">TDD</a></p>
                            <p class="item-title"><a href="/2016/12/31/Stats-Calculator-with-TDD-Part-2/" class="title">Stats Calculator with TDD Part 2</a></p>
                            <p class="item-date"><time datetime="2016-12-31T08:27:13.000Z" itemprop="datePublished">2016-12-31</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/TDD/">TDD</a></p>
                            <p class="item-title"><a href="/2016/12/19/Stats-Calculator-with-TDD-Part-1/" class="title">Stats Calculator with TDD Part 1</a></p>
                            <p class="item-date"><time datetime="2016-12-19T15:19:42.000Z" itemprop="datePublished">2016-12-19</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/TDD/">TDD</a></p>
                            <p class="item-title"><a href="/2016/12/18/Test-Driven-Development-Introduction/" class="title">Test Driven Development Introduction</a></p>
                            <p class="item-date"><time datetime="2016-12-18T03:29:15.000Z" itemprop="datePublished">2016-12-18</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-inner">
                            <p class="item-category"></p>
                            <p class="item-title"><a href="/2016/12/18/Hello-World/" class="title">Hello World</a></p>
                            <p class="item-date"><time datetime="2016-12-18T03:26:00.000Z" itemprop="datePublished">2016-12-18</time></p>
                        </div>
                    </li>
                
            </ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">categories</h3>
        <div class="widget">
            <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/TDD/">TDD</a><span class="category-list-count">3</span></li></ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">archives</h3>
        <div class="widget">
            <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/12/">December 2016</a><span class="archive-list-count">4</span></li></ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">tags</h3>
        <div class="widget">
            <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/TDD/">TDD</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Testing/">Testing</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/XP/">XP</a><span class="tag-list-count">3</span></li></ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">tag cloud</h3>
        <div class="widget tagcloud">
            <a href="/tags/TDD/" style="font-size: 10px;">TDD</a> <a href="/tags/Testing/" style="font-size: 10px;">Testing</a> <a href="/tags/XP/" style="font-size: 10px;">XP</a>
        </div>
    </div>

    
        
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">links</h3>
        <div class="widget">
            <ul>
                
                    <li>
                        <a href="http://hexo.io">Hexo</a>
                    </li>
                
            </ul>
        </div>
    </div>


    
    <div id="toTop" class="fa fa-angle-up"></div>
</aside>
            
        </div>
        <footer id="footer">
    <div class="outer">
        <div id="footer-info" class="inner">
            &copy; 2016 Sean Yin<br>
            Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>. Theme by <a href="http://github.com/ppoffice">PPOffice</a><br/>
        </div>
        <div id="copyright-info" class="inner">
            <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png" /></a><br />This work by <a xmlns:cc="http://creativecommons.org/ns#" href="seanyinx.github.io" property="cc:attributionName" rel="cc:attributionURL">seanyinx</a> is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License</a>.<br />Based on a work at <a xmlns:dct="http://purl.org/dc/terms/" href="seanyinx.github.io" rel="dct:source">seanyinx.github.io</a>.
        </div>
    </div>
</footer>
        
    
    <script>
    var disqus_config = function () {
        
            this.page.url = 'http://seanyinx.github.io/2016/12/31/Stats-Calculator-with-TDD-Part-2/';
        
        this.page.identifier = 'Stats-Calculator-with-TDD-Part-2';
    };
    (function() { 
        var d = document, s = d.createElement('script');  
        s.src = '//' + 'hexo-theme-icarus' + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>



    
        <script src="/libs/lightgallery/js/lightgallery.min.js"></script>
        <script src="/libs/lightgallery/js/lg-thumbnail.min.js"></script>
        <script src="/libs/lightgallery/js/lg-pager.min.js"></script>
        <script src="/libs/lightgallery/js/lg-autoplay.min.js"></script>
        <script src="/libs/lightgallery/js/lg-fullscreen.min.js"></script>
        <script src="/libs/lightgallery/js/lg-zoom.min.js"></script>
        <script src="/libs/lightgallery/js/lg-hash.min.js"></script>
        <script src="/libs/lightgallery/js/lg-share.min.js"></script>
        <script src="/libs/lightgallery/js/lg-video.min.js"></script>
    
    
        <script src="/libs/justified-gallery/jquery.justifiedGallery.min.js"></script>
    



<!-- Custom Scripts -->
<script src="/js/main.js"></script>

    </div>
</body>
</html>